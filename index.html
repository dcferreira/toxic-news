<!DOCTYPE html>
<html lang="en" class="antialiased">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Toxic News</title>
    <meta name="description" content="">
    <meta name="keywords" content="">

    <!--Datatables CSS-->
    <link href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/b-2.3.6/b-colvis-2.3.6/r-2.4.1/datatables.min.css"
          rel="stylesheet"/>
    <link href="./style.css" rel="stylesheet">


</head>
<body class="bg-gray-900 text-gray-300 tracking-wider leading-normal">

<nav class="bg-gray-800">
    <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
            <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                <!-- Mobile menu button-->
                <button type="button"
                        class="inline-flex items-center justify-center rounded-md p-2 text-gray-300 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                        aria-controls="mobile-menu" aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <!--
                      Icon when menu is closed.

                      Menu open: "hidden", Menu closed: "block"
                    -->
                    <svg id="menu-button" class="block h-6 w-6" fill="none"
                         viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                         aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
                    </svg>
                    <!--
                      Icon when menu is open.

                      Menu open: "block", Menu closed: "hidden"
                    -->
                    <svg id="menu-close-button" class="hidden h-6 w-6" fill="none"
                         viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                         aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                <div class="flex flex-shrink-0 items-center">
                    <img class="block h-8 w-auto lg:hidden"
                         src="logo.svg"
                         alt="Your Company">
                    <img class="hidden h-8 w-auto lg:block"
                         src="logo.svg"
                         alt="Your Company">
                </div>
                <div class="hidden sm:ml-6 sm:block">
                    <div class="flex space-x-4">
                        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                        
                        
                        <a href="/index.html"
                           class="bg-gray-900 text-white rounded-md px-3 py-2 text-sm font-medium"
                           aria-current="page">All Days</a>
                        
                        
                        
                        <a href="/daily.html"
                           class="text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium">Daily</a>
                        
                        
                        
                        <a href="/about.html"
                           class="text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium">About</a>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div class="hidden" id="mobile-menu">
        <div class="space-y-1 px-2 pt-2 pb-3">
            <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
            
            
            <a href="/index.html"
               class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium"
               aria-current="page">All Days</a>
            
            
            
            <a href="/daily.html"
               class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Daily</a>
            
            
            
            <a href="/about.html"
               class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">About</a>
            
            
        </div>
    </div>
</nav>

<div class="container w-full md:w-4/5 xl:w-3/5  mx-auto px-2">
<h1 class="flex items-center font-sans font-bold break-normal text-white px-2 py-4 text-xl md:text-3xl">
    How toxic are newspapers headlines?
</h1>
<h2 class="flex items-center font-semibold font-sans break-normal text-white px-2 text-l md:text-l">What is this?</h2>
<div class="px-2 text-sm md:pb-6">
<p>
    The table below quantifies how toxic the headlines in the main page of each news website are.
    Once per day, the headlines of these online newspapers are run through Machine Learning
    models, in an attempt to quantify toxicity.
    The table below contains the averages of the daily results over the selected time period.
    Check out the <a href="daily.html" class="text-blue-500 hover:underline">Daily</a>
    page for the results in a particular day, and the
    <a href="about.html" class="text-blue-500 hover:underline">About</a> page for
    methodology.
</p>
</div>
<div id='recipients'
     class="p-8 mt-6 lg:mt-0 sm:rounded-lg shadow-md border-gray-600 bg-gray-700">


    <div class="pb-4">
        <button id="btn-all" class="bg-gray-900 hover:bg-gray-600 text-white font-bold py-1 px-4 rounded">All time</button>
        <button id="btn-year" class="bg-gray-800 hover:bg-gray-600 text-gray-300 px-4 py-1 rounded">Last year</button>
        <button id="btn-90" class="bg-gray-800 hover:bg-gray-600 text-gray-300 px-4 py-1 rounded">Last 90 days</button>
        <button id="btn-30" class="bg-gray-800 hover:bg-gray-600 text-gray-300 px-4 py-1 rounded">Last 30 days</button>
        <button id="btn-7" class="bg-gray-800 hover:bg-gray-600 text-gray-300 px-4 py-1 rounded">Last 7 days</button>
    </div>
    <table id="example" class="stripe hover"
           style="width:100%; padding-top: 1em;  padding-bottom: 1em;">
    </table>
</div>

<!--Dataframes in JS-->
<script src="https://gmousse.github.io/dataframe-js/dist/dataframe.js"></script>

<!-- jQuery -->
<script type="text/javascript"
        src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<!--Datatables -->
<script src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/b-2.3.6/b-colvis-2.3.6/r-2.4.1/datatables.min.js"></script>
<script>const DataFrame = dfjs.DataFrame;

const updateTable = (table, fname) => {
    DataFrame.fromCSV(fname).then(df => {
            var data = df.toArray();
            table.clear();
            table.rows.add(data);
            table.draw();

        }
    );
}

const columns = [
    {title: "Name"},
    {title: "Toxicity"},
    {title: "Severe Toxicity",visible: false},
    {title: "Obscene", visible: false},
    {title: "Identity Attack"},
    {title: "Insult"},
    {title: "Threat", visible: false},
    {title: "Sexually Explicit", visible: false},
    {title: "Positive (%)", visible: false},
    {title: "Neutral (%)"},
    {title: "Negative (%)"},
    {title: "#Days"},
]

const deselectBtn = (btn) => {
    btn.classList.add("bg-gray-800", "text-gray-300");
    btn.classList.remove("bg-gray-900", "text-white", "font-bold");
}
const selectBtn = (btn) => {
    btn.classList.remove("bg-gray-800", "text-gray-300");
    btn.classList.add("bg-gray-900", "text-white", "font-bold");
}


$(document).ready(() => {
    const table = $('#example').DataTable({
        dom: 'Bfrtlip',
        columns: columns,
        scrollX: true,
        buttons: [{
            extend: 'colvis',
            text: 'Columns',
            columns: Array(columns.length - 1).fill().map((_, i) => i + 1),
        }],
    });
    console.log(table.buttons());
    updateTable(table, "averages/all.csv");

    // buttons
    const btnAll = document.getElementById('btn-all');
    const btnYear = document.getElementById('btn-year');
    const btn90 = document.getElementById('btn-90');
    const btn30 = document.getElementById('btn-30');
    const btn7 = document.getElementById('btn-7');

    const clickButton = (name) => {
        const fname = {
            all: "averages/all.csv", year: "averages/year.csv", 90: "averages/90.csv",
            30: "averages/30.csv", 7: "averages/7.csv"
        }[name];
        const selectedBtn = {
            all: btnAll,
            year: btnYear,
            90: btn90,
            30: btn30,
            7: btn7
        }[name];

        deselectBtn(btnAll);
        deselectBtn(btnYear);
        deselectBtn(btn90);
        deselectBtn(btn30);
        deselectBtn(btn7);

        selectBtn(selectedBtn);

        updateTable(table, fname);
    }

    btnAll.addEventListener("click", () => clickButton("all"));
    btnYear.addEventListener("click", () => clickButton("year"));
    btn90.addEventListener("click", () => clickButton(90));
    btn30.addEventListener("click", () => clickButton(30));
    btn7.addEventListener("click", () => clickButton(7));
});
</script>

</div>
<!--/container-->

<!--Show/hide mobile menu-->
<script>
    const button = document.querySelector('#menu-button'); // Hamburger Icon
    const closeButton = document.querySelector('#menu-close-button')
    const menu = document.querySelector('#mobile-menu'); // Menu

    const toggle = () => {
        button.classList.toggle('hidden');
        button.classList.toggle('block');

        closeButton.classList.toggle('hidden');
        closeButton.classList.toggle('block');

        menu.classList.toggle('hidden');
    };

    button.addEventListener('click', toggle);
    closeButton.addEventListener('click', toggle);
</script>

</body>

</html>